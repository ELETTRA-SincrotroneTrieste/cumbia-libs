<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qumbia-tango-controls: CuTControlsReader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qumbia-tango-controls
   &#160;<span id="projectnumber">1.x</span>
   </div>
   <div id="projectbrief">Library on top of cumbia-qtcontrols and cumbia-tango</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCuTControlsReader-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CuTControlsReader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>implements CuControlsReaderA abstract class and provides an interface to connect a Tango reader to a source.  
 <a href="classCuTControlsReader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cutcontrolsreader_8h_source.html">cutcontrolsreader.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CuTControlsReader:</div>
<div class="dyncontent">
<div class="center"><img src="classCuTControlsReader__inherit__graph.png" border="0" usemap="#CuTControlsReader_inherit__map" alt="Inheritance graph"/></div>
<map name="CuTControlsReader_inherit__map" id="CuTControlsReader_inherit__map">
<area shape="rect" title="implements CuControlsReaderA abstract class and provides an interface to connect a Tango reader to a ..." alt="" coords="5,80,144,107"/>
<area shape="rect" title=" " alt="" coords="5,5,144,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0107356633707a796986296697b23cd4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a0107356633707a796986296697b23cd4">CuTControlsReader</a> (Cumbia *cumbia_tango, CuDataListener *tl)</td></tr>
<tr class="memdesc:a0107356633707a796986296697b23cd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">class constructor that's configured with CumbiaTango and CuDataListener instances  <a href="classCuTControlsReader.html#a0107356633707a796986296697b23cd4">More...</a><br /></td></tr>
<tr class="separator:a0107356633707a796986296697b23cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee97144f58a0f2c9c34eb05ae7f9666"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a9ee97144f58a0f2c9c34eb05ae7f9666">~CuTControlsReader</a> ()</td></tr>
<tr class="memdesc:a9ee97144f58a0f2c9c34eb05ae7f9666"><td class="mdescLeft">&#160;</td><td class="mdescRight">the class destructor.  <a href="classCuTControlsReader.html#a9ee97144f58a0f2c9c34eb05ae7f9666">More...</a><br /></td></tr>
<tr class="separator:a9ee97144f58a0f2c9c34eb05ae7f9666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b27a425101532698e2c987b625804bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a3b27a425101532698e2c987b625804bf">setSource</a> (const QString &amp;s)</td></tr>
<tr class="memdesc:a3b27a425101532698e2c987b625804bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">connect the reader to the Tango control system and start reading  <a href="classCuTControlsReader.html#a3b27a425101532698e2c987b625804bf">More...</a><br /></td></tr>
<tr class="separator:a3b27a425101532698e2c987b625804bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6fc977136a85685d0be26518b5396c"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a7e6fc977136a85685d0be26518b5396c">source</a> () const</td></tr>
<tr class="separator:a7e6fc977136a85685d0be26518b5396c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04a292932322ed33ac19b86741c4ddd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a04a292932322ed33ac19b86741c4ddd9">unsetSource</a> ()</td></tr>
<tr class="memdesc:a04a292932322ed33ac19b86741c4ddd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the reader.  <a href="classCuTControlsReader.html#a04a292932322ed33ac19b86741c4ddd9">More...</a><br /></td></tr>
<tr class="separator:a04a292932322ed33ac19b86741c4ddd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2245b1d686fdf558a4b8643fd586b6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#aa2245b1d686fdf558a4b8643fd586b6f">setOptions</a> (const CuData &amp;o)</td></tr>
<tr class="memdesc:aa2245b1d686fdf558a4b8643fd586b6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">configures the reader through the options passed as parameter  <a href="classCuTControlsReader.html#aa2245b1d686fdf558a4b8643fd586b6f">More...</a><br /></td></tr>
<tr class="separator:aa2245b1d686fdf558a4b8643fd586b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d8a911263d0c7c602b3eb8a86f963e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#a8d8a911263d0c7c602b3eb8a86f963e1">sendData</a> (const CuData &amp;d)</td></tr>
<tr class="memdesc:a8d8a911263d0c7c602b3eb8a86f963e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">forwards the data passed as parameter to the underlying CuTReader  <a href="classCuTControlsReader.html#a8d8a911263d0c7c602b3eb8a86f963e1">More...</a><br /></td></tr>
<tr class="separator:a8d8a911263d0c7c602b3eb8a86f963e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32f58a7cc401d77a00f4dcfbe2a3e35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCuTControlsReader.html#ad32f58a7cc401d77a00f4dcfbe2a3e35">getData</a> (CuData &amp;d_ino) const</td></tr>
<tr class="memdesc:ad32f58a7cc401d77a00f4dcfbe2a3e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a CuData bundle as input argument to the CuTReader associated to this object with this source and get a reply.  <a href="classCuTControlsReader.html#ad32f58a7cc401d77a00f4dcfbe2a3e35">More...</a><br /></td></tr>
<tr class="separator:ad32f58a7cc401d77a00f4dcfbe2a3e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>implements CuControlsReaderA abstract class and provides an interface to connect a Tango reader to a source. </p>
<p>Built with references to CumbiaTango and CuDataListener, <a class="el" href="classCuTControlsReader.html" title="implements CuControlsReaderA abstract class and provides an interface to connect a Tango reader to a ...">CuTControlsReader</a> implements CuControlsReaderA and connects a reader to the Tango control system through the setSource method. setOptions can discretionary be called before setSource.</p>
<p>For a list of options recognised by CuTReader, see CuTReader::getData</p>
<p>Parameters and configuration can be sent and queried with sendData and getData respectively.</p>
<p>unsetSource can finally be called in order to stop a running reader, and if <a class="el" href="classCuTControlsReader.html" title="implements CuControlsReaderA abstract class and provides an interface to connect a Tango reader to a ...">CuTControlsReader</a> is deleted, unsetSource is called automatically. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0107356633707a796986296697b23cd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0107356633707a796986296697b23cd4">&#9670;&nbsp;</a></span>CuTControlsReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CuTControlsReader::CuTControlsReader </td>
          <td>(</td>
          <td class="paramtype">Cumbia *&#160;</td>
          <td class="paramname"><em>cumbia_tango</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CuDataListener *&#160;</td>
          <td class="paramname"><em>tl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>class constructor that's configured with CumbiaTango and CuDataListener instances </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cumbia_tango</td><td>a pointer to a CumbiaTango instance </td></tr>
    <tr><td class="paramname">CuDataListener</td><td>a pointer to an object implementing the CuDataListener interface </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9ee97144f58a0f2c9c34eb05ae7f9666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee97144f58a0f2c9c34eb05ae7f9666">&#9670;&nbsp;</a></span>~CuTControlsReader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CuTControlsReader::~CuTControlsReader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the class destructor. </p>
<p>The class destructors sets the invalidate flag on the listener, so that it won't be used later, and calls unsetSource </p>

<p class="reference">References <a class="el" href="classCuTControlsReader.html#a04a292932322ed33ac19b86741c4ddd9">unsetSource()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad32f58a7cc401d77a00f4dcfbe2a3e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32f58a7cc401d77a00f4dcfbe2a3e35">&#9670;&nbsp;</a></span>getData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuTControlsReader::getData </td>
          <td>(</td>
          <td class="paramtype">CuData &amp;&#160;</td>
          <td class="paramname"><em>d_ino</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a CuData bundle as input argument to the CuTReader associated to this object with this source and get a reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d_ino</td><td>a (non const) reference to a CuData compiled with the input arguments recognised by the CuTReader. When the function returns, the CuData will contain the reply.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>options recognised by CuTReader.</dt><dd>For a list of options recognised by CuTReader, see CuTReader::getData</dd></dl>
<dl class="section note"><dt>Note</dt><dd>CuTReader implements the CuTangoActionI interface.</dd></dl>
<p>This method finds the CuTangoActionI with the source of this reader and calls getData on it, passing d_ino as argument. </p>

</div>
</div>
<a id="a8d8a911263d0c7c602b3eb8a86f963e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d8a911263d0c7c602b3eb8a86f963e1">&#9670;&nbsp;</a></span>sendData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuTControlsReader::sendData </td>
          <td>(</td>
          <td class="paramtype">const CuData &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>forwards the data passed as parameter to the underlying CuTReader </p>
<dl class="section note"><dt>Note</dt><dd>CuTReader implements the CuTangoActionI interface.</dd></dl>
<p>This method finds the CuTangoActionI with the source of this reader and calls sendData on it. </p>

</div>
</div>
<a id="aa2245b1d686fdf558a4b8643fd586b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2245b1d686fdf558a4b8643fd586b6f">&#9670;&nbsp;</a></span>setOptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuTControlsReader::setOptions </td>
          <td>(</td>
          <td class="paramtype">const CuData &amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>configures the reader through the options passed as parameter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">o</td><td>CuData with the options to set on the reader</td></tr>
  </table>
  </dd>
</dl>
<p>See <a class="el" href="classCuTReaderFactory.html#af534524cbf5b4d47965080002bd0dc74">CuTReaderFactory::setOptions</a> and CuTangoOptBuilder documentation.</p>
<p>This is usually called by <a class="el" href="classCuTReaderFactory.html#aea8b659485bfcea9b6bc34ef11d356cc" title="creates and returns a new CuTControlsReader, configured with the given Cumbia and CuDataListener.">CuTReaderFactory::create</a> immediately after <a class="el" href="classCuTControlsWriter.html" title="implements CuControlsWriterA abstract class and provides an interface to connect a Tango writer to a ...">CuTControlsWriter</a> is instantiated. </p>

<p class="reference">Referenced by <a class="el" href="classCuTReaderFactory.html#aea8b659485bfcea9b6bc34ef11d356cc">CuTReaderFactory::create()</a>.</p>

</div>
</div>
<a id="a3b27a425101532698e2c987b625804bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b27a425101532698e2c987b625804bf">&#9670;&nbsp;</a></span>setSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuTControlsReader::setSource </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>connect the reader to the Tango control system and start reading </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>the name of the source (Tango device attribute or command) for the reader</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Usage</dt><dd>Normally, cumbia-qtcontrols widgets provide a setSource method that deals with reader set up through CuContext. If you need to implement a custom reader, please refer to the CuContext documentation and to the examples offered by QuLabel or QuWatcher.</dd></dl>
<dl class="section user"><dt>Source syntax</dt><dd><ul>
<li>test/device/1/double_scalar: read the Tango double_scalar attribute </li>
<li>inj/diagnostics/cm_inj.01-&gt;GetCharge(0,1000): read the Tango command and provide 0, 1000 as input parameters (argin) </li>
<li>$1-&gt;GetCharge(0,1000) same as above, but $1 is replaced by the first device name found in the command line arguments of the application </li>
<li>$1-&gt;GetCharge(&amp;spinBoxMode, &amp;spinBoxSamples) same as above, but the two parameters are sent according to the "value" property of the two spin boxes with the names specified in the arguments</li>
</ul>
This method starts two activities, one for attribute configuration (i.e. get attribute configuration or get command info) and one for the actual reader. The configuration step is exploited by graphical elements to set minimum, maximum, alarm values, units and so on. </dd></dl>

<p class="reference">References <a class="el" href="classCuTControlsUtils.html#af887be53c21993b9b3ff7c413ad5d1c3">CuTControlsUtils::replaceWildcards()</a>.</p>

</div>
</div>
<a id="a7e6fc977136a85685d0be26518b5396c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6fc977136a85685d0be26518b5396c">&#9670;&nbsp;</a></span>source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString CuTControlsReader::source </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>returns the source of the reader.</p>
<dl class="section user"><dt>note</dt><dd>The returned string will contain the actual source, after wildcards have been replaced.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classCuTControlsReader.html#a3b27a425101532698e2c987b625804bf" title="connect the reader to the Tango control system and start reading">setSource</a> </dd></dl>

</div>
</div>
<a id="a04a292932322ed33ac19b86741c4ddd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a292932322ed33ac19b86741c4ddd9">&#9670;&nbsp;</a></span>unsetSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuTControlsReader::unsetSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the reader. </p>
<p>This must be called from the main thread.</p>
<dl class="section user"><dt>Developer note</dt><dd>Calls CumbiaTango::unlinkListener for CuTangoActionI::ReaderConfig and CuTangoActionI::Reader action types in a row. </dd></dl>

<p class="reference">Referenced by <a class="el" href="classCuTControlsReader.html#a9ee97144f58a0f2c9c34eb05ae7f9666">~CuTControlsReader()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cutcontrolsreader_8h_source.html">cutcontrolsreader.h</a></li>
<li><a class="el" href="cutcontrolsreader_8cpp.html">cutcontrolsreader.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 29 2021 16:20:58 for qumbia-tango-controls by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
