<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cumbia-tango: CuData bundle description for data exchange with the Tango world</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cumbia-tango
   &#160;<span id="projectnumber">1.x</span>
   </div>
   <div id="projectbrief">C++ multi threaded library based on cumbia and the Tango control system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">CuData bundle description for data exchange with the <a class="el" href="namespaceTango.html">Tango</a> world </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>CuData for <a class="el" href="namespaceTango.html">Tango</a> attribute configuration and command info</h3>
<h4>The CuData received upon <em>attribute configuration</em> will contain the following keys:</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Value  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Notes   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">type  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">"property"  </td><td class="markdownTableBodyNone">Identifies a configuration content within CuData  </td><td class="markdownTableBodyNone">Fixed value to identify the type of CuData   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">src  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The source name as configured with setSource. <a class="el" href="namespaceTango.html">Tango</a> device / attribute  </td><td class="markdownTableBodyNone"><em>src</em> key always present in CuData   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The attribute value that is normally fetched during the configuration.  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">true  </td><td class="markdownTableBodyNone">A CuData with configuration data will have the "data" key always set to true  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">msg  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A message bearing information about the success of the operation.  </td><td class="markdownTableBodyNone">See the <em>err</em> key below   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">err  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">true if an error occurred, false otherwise  </td><td class="markdownTableBodyNone">See the <em>msg</em> key above   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data_format  </td><td class="markdownTableBodyNone">Tango::AttrDataFormat (enum)  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute format, Scalar,Spectrum,...  </td><td class="markdownTableBodyNone">convert with toInt()   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data_format_str  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">string representation of data_format  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data_type  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> data type  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">description  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute description from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">display_unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> display unit from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">standard_unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> standard unit from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> "unit" from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">label  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> "label" from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">writable  </td><td class="markdownTableBodyNone">Tango::AttrWriteType  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> write type (enum) { READ, READ_WITH_WRITE, WRITE, READ_WRITE, WT_UNKNOWN }  </td><td class="markdownTableBodyNone">convert with toInt()   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">writable_attr_name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">writable_attr_name from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">max_alarm  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo max_alarm  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">min_alarm  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo min_alarm  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">max_warning  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo max_warning  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">min_warning  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo min_warning  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">delta_t  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo delta_t  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">delta_val  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeAlarmInfo delta_val  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">archive_abs_change  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.arch_event.archive_abs_change  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">archive_rel_change  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.arch_event.archive_rel_change  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">archive_period  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.arch_event.archive_period  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">abs_change  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.ch_event.abs_change  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rel_change  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.ch_event.rel_change  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">periodic_period  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::AttributeEventInfo.per_event.period  </td><td class="markdownTableBodyNone">devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">max  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> AttributeConfig max_value  </td><td class="markdownTableBodyNone">Named "max" for consistency with Epics   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">min  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> AttributeConfig min_value  </td><td class="markdownTableBodyNone">Named "min" for consistency with Epics   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> name string from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">max_dim_x  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute max x dimension  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">max_dim_y  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute max y dimension  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">disp_level  </td><td class="markdownTableBodyNone">Tango::DispLevel  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::DispLevel from AttributeInfoEx (lib/cpp/server/idl/tango.h: { OPERATOR, EXPERT, DL_UNKNOWN) }  </td><td class="markdownTableBodyNone">convert with toInt()   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root_attr_name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">from AttributeInfoEx: Root attribute name (in case of forwarded attribute)  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">description  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute description from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">display_unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> display unit from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">standard_unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> standard unit from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">unit  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> "unit" from AttributeInfo  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">success_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string with the name of the color provided the class <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a> associated to an error/success  </td><td class="markdownTableBodyNone">Can be used to decorate widgets   </td></tr>
</table>
<h4>The CuData received upon <em>command info</em> configuration type will contain the following keys:</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Value  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Notes   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">type  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">"property"  </td><td class="markdownTableBodyNone">Identifies a configuration content within CuData  </td><td class="markdownTableBodyNone">Fixed value to identify the type of CuData   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">src  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The source name as configured with setSource. <a class="el" href="namespaceTango.html">Tango</a> device / attribute  </td><td class="markdownTableBodyNone"><em>src</em>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">true  </td><td class="markdownTableBodyNone">A CuData with configuration data will have the "data" key always set to true  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">msg  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A message bearing information about the success of the operation.  </td><td class="markdownTableBodyNone">See the <em>err</em> key below   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">err  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">true if an error occurred, false otherwise  </td><td class="markdownTableBodyNone">See the <em>msg</em> key abovekey always present in CuData   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The attribute value that is normally fetched during the configuration.  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cmd_name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The command name, from Tango::CommandInfo  </td><td class="markdownTableBodyNone">from Tango::CommandInfo, devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">in_type  </td><td class="markdownTableBodyNone">long  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Input parameter data type  </td><td class="markdownTableBodyNone">from Tango::CommandInfo, devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">out_type  </td><td class="markdownTableBodyNone">long  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Output parameter data type  </td><td class="markdownTableBodyNone">from Tango::CommandInfo, devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data_type  </td><td class="markdownTableBodyNone">long  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Output parameter type, same as "out_type", in order to be consistent with <em>attribute configuration</em> CuData  </td><td class="markdownTableBodyNone">see CuData "data_type" from attribute configuration above   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">in_type_desc  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Input parameter description  </td><td class="markdownTableBodyNone">from Tango::CommandInfo, devapi.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">out_type_desc  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Output parameter description  </td><td class="markdownTableBodyNone">from Tango::CommandInfo, devapi.h   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data_format  </td><td class="markdownTableBodyNone">Tango::AttrDataFormat (enum)  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Provided for consistency with <em>attribute configuration</em> CuData, determined from CommandInfo out_type  </td><td class="markdownTableBodyNone">see CuData "data_format" from attribute configuration above   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">success_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string with the name of the color provided the class <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a> associated to an error/success  </td><td class="markdownTableBodyNone">Can be used to decorate widgets   </td></tr>
</table>
<h3>Example</h3>
<p>In this example, we discuss how a plot is configured using the CuData with "type" set to "property".</p>
<div class="fragment"><div class="line">void QuSpectrumPlot::update(const CuData &amp;da)</div><div class="line">{</div><div class="line">    if(!da[&quot;err&quot;].toBool() &amp;&amp; da[&quot;type&quot;].toString() == &quot;property&quot;)</div><div class="line">    {</div><div class="line">        CuVariant m, M;</div><div class="line">        m = da[&quot;min&quot;];  // min value</div><div class="line">        M = da[&quot;max&quot;];  // max value</div><div class="line">        bool okl, oku;  // toDouble ok for lower and upper bound</div><div class="line">        double lb, ub;  // double for lower and upper bound</div><div class="line">        QString min = QString::fromStdString(m.toString()); // min is of type string</div><div class="line">        QString max = QString::fromStdString(M.toString()); // max is of type string</div><div class="line">        QString plotTitle = QString::fromStdString(da[&quot;label&quot;].toString());</div><div class="line">        lb = min.toDouble(&amp;okl);  // string to double, see if ok</div><div class="line">        ub = max.toDouble(&amp;oku);  // string to double, see if ok</div><div class="line"></div><div class="line">        if(okl &amp;&amp; oku)</div><div class="line">        {</div><div class="line">            // get current default lower and upper bounds</div><div class="line">            double current_def_lb = defaultLowerBound(QwtPlot::yLeft);</div><div class="line">            double current_def_ub = defaultUpperBound(QwtPlot::yLeft);</div><div class="line">            // if the minimum saved into lb is smaller than the current lower bound</div><div class="line">            if(current_def_lb &gt; lb)</div><div class="line">                current_def_lb = lb;</div><div class="line">            if(current_def_ub &lt; ub)</div><div class="line">                current_def_ub = ub;</div><div class="line">            setDefaultBounds(current_def_lb, current_def_ub, QwtPlot::yLeft);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3>CuData contents from <a class="el" href="namespaceTango.html">Tango</a> Device attributes</h3>
<p>When reading attributes, the key/values you should expect to find within the CuData are shown in the following table:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Value  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Notes   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">true  </td><td class="markdownTableBodyNone">A CuData with configuration data will have the "data" key always set to true  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">src  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The source name as configured with setSource. <a class="el" href="namespaceTango.html">Tango</a> device / attribute  </td><td class="markdownTableBodyNone"><em>src</em>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">msg  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A message bearing information about the success of the operation.  </td><td class="markdownTableBodyNone">See the <em>err</em> key below   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">err  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">true if an error occurred, false otherwise  </td><td class="markdownTableBodyNone">See the <em>msg</em> key abovekey always present in CuData   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">success_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string with the name of the color provided the class <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a> associated to an error/success  </td><td class="markdownTableBodyNone">Can be used to decorate widgets   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">timestamp_ms  </td><td class="markdownTableBodyNone">time_t + suseconds_t  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Timestamp as integer: a struct timeval is used to store the timestamp. Formula: tiv.tv_sec * 1000 + tiv.tv_usec / 1000;  </td><td class="markdownTableBodyNone">can convert with toLongInt()   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">timestamp_us  </td><td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">timestamp in a double: seconds.microseconds: static_cast&lt;double&gt;(tiv.tv_sec) + static_cast&lt;double&gt;(tiv.tv_usec) * 1e-6  </td><td class="markdownTableBodyNone">convert with toDouble   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">quality  </td><td class="markdownTableBodyNone">const Tango::AttrQuality  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> attribute quality { ATTR_VALID, ATTR_INVALID, ATTR_ALARM, ATTR_CHANGING, ATTR_WARNING }  </td><td class="markdownTableBodyNone">from server/idl/tango.h. Convert with toInt   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">quality_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string with the name of the color provided the class <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a>  </td><td class="markdownTableBodyNone">can be used to decorate widgets. Use in combination with QuPalette. Convert with toString   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data_format_str  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Data format as string ("scalar", "vector", matrix", "data format unknown") &lt;/td&gt;
    &lt;td class="markdownTableBodyNone"&gt; consistent naming across tango and epics   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The attribute value. (read)  </td><td class="markdownTableBodyNone">The tango read value   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">For Tango::DEV_STATE attribute types, the state is mapped into its string representation.  </td><td class="markdownTableBodyNone">Convenience conversion applied only for DEV_STATE attribute data type.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">w_value  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The attribute write value. Available if the attribute is read/write, key missing otherwise.  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceTango.html">Tango</a> write value in read/write attributes   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">state_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string describing a color for a Tango::DEV_STATE, configuration possible through <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a>.  </td><td class="markdownTableBodyNone">Can be used to decorate a widget. Available only if attribute.get_type() == Tango::DEV_STATE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">state  </td><td class="markdownTableBodyNone">long int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A Tango::DEV_STATE casted to long int. Available for Tango::DEV_STATE attributes  </td><td class="markdownTableBodyNone">Available only if attribute.get_type() == Tango::DEV_STATE   </td></tr>
</table>
<h3>CuData contents from <a class="el" href="namespaceTango.html">Tango</a> commands</h3>
<p>When getting output arguments from commands, the key/values you should expect to find within the CuData are shown in the following table:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Value  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Notes   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">true  </td><td class="markdownTableBodyNone">A CuData with configuration data will have the "data" key always set to true  </td><td class="markdownTableBodyNone">-   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">src  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The source name as configured with setSource. <a class="el" href="namespaceTango.html">Tango</a> device / attribute  </td><td class="markdownTableBodyNone"><em>src</em>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">msg  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A message bearing information about the success of the operation.  </td><td class="markdownTableBodyNone">See the <em>err</em> key below   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">err  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">true if an error occurred, false otherwise  </td><td class="markdownTableBodyNone">See the <em>msg</em> key abovekey always present in CuData   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">success_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string with the name of the color provided the class <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a> associated to an error/success  </td><td class="markdownTableBodyNone">Can be used to decorate widgets   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">timestamp_ms  </td><td class="markdownTableBodyNone">time_t + suseconds_t  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Timestamp as integer: a struct timeval is used to store the timestamp. Formula: tiv.tv_sec * 1000 + tiv.tv_usec / 1000;  </td><td class="markdownTableBodyNone">can convert with toLongInt()   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">timestamp_us  </td><td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">timestamp in a double: seconds.microseconds: static_cast&lt;double&gt;(tiv.tv_sec) + static_cast&lt;double&gt;(tiv.tv_usec) * 1e-6  </td><td class="markdownTableBodyNone">convert with toDouble   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data_format_str  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Data format as string ("scalar", "vector", matrix", "data format unknown") &lt;/td&gt;
    &lt;td class="markdownTableBodyNone"&gt; consistent naming across tango and epics   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data_type  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Tango::CmdArgType casted to an int: enum CmdArgType {DEV_VOID = 0,DEV_BOOLEAN,DEV_SHORT,DEV_LONG,... }  </td><td class="markdownTableBodyNone">From /lib/cpp/server/tango_const.h   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">The attribute value. (read)  </td><td class="markdownTableBodyNone">The tango read value   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">value  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">For Tango::DEV_STATE attribute types, the state is mapped into its string representation.  </td><td class="markdownTableBodyNone">Convenience conversion applied only for DEV_STATE attribute data type.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">state_color  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A string describing a color for a Tango::DEV_STATE, configuration possible through <a class="el" href="classCuTangoWorldConfig.html" title="A class used to store configuration for Tango states color and name, Tango AttrQuality color and name...">CuTangoWorldConfig</a>.  </td><td class="markdownTableBodyNone">Can be used to decorate a widget. Available only if attribute.get_type() == Tango::DEV_STATE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">state  </td><td class="markdownTableBodyNone">long int  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">A Tango::DEV_STATE casted to long int. Available for Tango::DEV_STATE attributes  </td><td class="markdownTableBodyNone">Available only if attribute.get_type() == Tango::DEV_STATE   </td></tr>
</table>
<h3>CuData contents for attribute properties.</h3>
<p>The contents of CuData when used to fetch properties from the database are more dynamic and depend on the type of property fetched: attribute, class or device. Please refer to the <a class="el" href="tutorial_activity.html">Writing an activity to read Tango device, attribute and class properties</a> for more information and for an example of application reading from the tango database.</p>
<p>To fetch properties from the <a class="el" href="namespaceTango.html">Tango</a> database, a list of <em>input CuData</em> must be provided.</p>
<ul>
<li>To get <em>attribute properties</em>, each CuData element must be compiled as follows:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Example   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">device  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The tango device name  </td><td class="markdownTableBodyNone">"test/device/1"   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The attribute property name  </td><td class="markdownTableBodyNone">"description"   </td></tr>
</table>
<ul>
<li>To get <em>device properties</em>, each CuData element must be compiled as follows:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Example   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">device  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The tango device name  </td><td class="markdownTableBodyNone">"test/device/1"   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The <em>device</em> property name  </td><td class="markdownTableBodyNone">"description"   </td></tr>
</table>
<ul>
<li>To get <em>class properties</em>, each CuData bundle must be compiled as follows:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Example   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">class  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The class name of the device  </td><td class="markdownTableBodyNone">"TangoTest"   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">name  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">The property name  </td><td class="markdownTableBodyNone">"description"   </td></tr>
</table>
<h3>Example of code to get properties from the <a class="el" href="namespaceTango.html">Tango</a> database</h3>
<p>The following code shows how to set up a list of CuData where every element describes the type and name of the property to be fetched. The PropertyReader class implements CuDataListener, so that when properties are available, the <em>onUpdate</em> method is invoked.</p>
<div class="fragment"><div class="line">// Suppose each element of &quot;props&quot; is a std::string formed as follows:</div><div class="line">// - test/device/1:description device property: two &#39;/&#39; and &#39;:&#39;</div><div class="line">// - test/device/1/double_scalar:values attribute properties: three &#39;/&#39; and one &#39;:&#39;</div><div class="line">// - TangoTest:Description class property: one &#39;/&#39;</div><div class="line">void PropertyReader::get(const char *id, const std::vector&lt;std::string&gt; &amp;props)</div><div class="line">{</div><div class="line">    /* start the event loop in a separate thread, where data from activities will be posted */</div><div class="line">    std::list&lt;CuData&gt; in_data;</div><div class="line">    for(size_t i = 0; i &lt; props.size(); i++) {</div><div class="line">        size_t cnt = count(props[i].begin(), props[i].end(), &#39;/&#39;);</div><div class="line">        size_t cpos = props[i].find(&#39;:&#39;);</div><div class="line">        if(cnt == 2 &amp;&amp; cpos &lt; std::string::npos)</div><div class="line">        {</div><div class="line">            CuData devpd(&quot;device&quot;, props[i].substr(0, cpos));</div><div class="line">            devpd[&quot;name&quot;] = props[i].substr(cpos + 1, std::string::npos);</div><div class="line">            in_data.push_back(devpd);</div><div class="line">        }</div><div class="line">        else if(cnt == 3) {</div><div class="line">            CuData devpd(&quot;device&quot;, props[i].substr(0, props[i].rfind(&#39;/&#39;)));</div><div class="line">            if(cpos &lt; std::string::npos) {</div><div class="line">                devpd[&quot;attribute&quot;] = props[i].substr(props[i].rfind(&#39;/&#39;) + 1, cpos - props[i].rfind(&#39;/&#39;) -1);</div><div class="line">                devpd[&quot;name&quot;] = props[i].substr(cpos + 1, std::string::npos);</div><div class="line">            }</div><div class="line">            else</div><div class="line">                devpd[&quot;attribute&quot;] = props[i].substr(props[i].rfind(&#39;/&#39;) + 1, cpos); // cpos == npos</div><div class="line"></div><div class="line">            in_data.push_back(devpd);</div><div class="line">        }</div><div class="line">        else if(cnt == 0 &amp;&amp; cpos &lt; std::string::npos) { // class</div><div class="line">            CuData cld(&quot;class&quot;, props[i].substr(0, cpos));</div><div class="line">            cld[&quot;name&quot;] = props[i].substr(cpos + 1);</div><div class="line">            in_data.push_back(cld);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">    // now fetch the properties</div><div class="line">    CuTDbPropertyReader *pr = new CuTDbPropertyReader(id, m_ct);</div><div class="line">    // PropertyReader in this example implements the CuDataListener interface</div><div class="line">    pr-&gt;addListener(this);</div><div class="line">    // get the properties listed within in_data</div><div class="line">    pr-&gt;get(in_data);</div></div><!-- fragment --><p>The <em>result</em> is again a CuData compiled as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Example  </th><th class="markdownTableHeadNone">Notes   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">err  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">true if an error occurred, false otherwise  </td><td class="markdownTableBodyNone">if(data["err"].toBool() { ... error ... }  </td><td class="markdownTableBodyNone">See the <em>msg</em> key below   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">msg  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">A message bearing information about the success of the operation.  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">See the <em>err</em> key above   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">list  </td><td class="markdownTableBodyNone">vector of strings  </td><td class="markdownTableBodyNone">The list of the properties contained in the result  </td><td class="markdownTableBodyNone">"test/device/1/long_scalar:abs_change", "TangoTest:Description", "test/device/1:helperApplication"  </td><td class="markdownTableBodyNone">use this to get the list of fetched properties   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">property1  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">The property value corresponding to the "property1" property  </td><td class="markdownTableBodyNone">double abs_ch = std::stod(data["test/device/1/long_scalar:abs_change"].toString());  </td><td class="markdownTableBodyNone">always use toString, properties are fetched as strings   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">property2  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">The property value corresponding to the "property2" property  </td><td class="markdownTableBodyNone">std::string helperApp = data["test/device/1:helperApplication"].toString();  </td><td class="markdownTableBodyNone">always use toString, properties are fetched as strings   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">...  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">The i-th property value...  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">always use toString, properties are fetched as strings   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">propertyN  </td><td class="markdownTableBodyNone">CuVariant  </td><td class="markdownTableBodyNone">The N-th property value corresponding to the "propertyN" property  </td><td class="markdownTableBodyNone">std::string nthpropval = data["propertyN"].toString();  </td><td class="markdownTableBodyNone">always use toString, properties are fetched as strings   </td></tr>
</table>
<p>and is delivered as argument of the <em>onUpdate</em> method. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 13 2019 11:47:49 for cumbia-tango by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
