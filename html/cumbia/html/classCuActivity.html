<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cumbia: CuActivity Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cumbia<span id="projectnumber">&#160;1.x</span>
   </div>
   <div id="projectbrief">general purpose multi threaded library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classCuActivity.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classCuActivity-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CuActivity Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>a class with hook functions where work can be done in a separate thread and wherefrom results are <em>published</em> to the main thread.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cuactivity_8h_source.html">cuactivity.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CuActivity:</div>
<div class="dyncontent">
<div class="center"><img src="classCuActivity__inherit__graph.png" border="0" usemap="#aCuActivity_inherit__map" alt="Inheritance graph"/></div>
<map name="aCuActivity_inherit__map" id="aCuActivity_inherit__map">
<area shape="rect" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub..." alt="" coords="29,5,111,32"/>
<area shape="rect" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti..." alt="" coords="5,80,135,107"/>
<area shape="poly" title=" " alt="" coords="73,48,73,80,67,80,67,48"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a23c71d30d18fdf76bf7b3b0ce148013d" id="r_a23c71d30d18fdf76bf7b3b0ce148013d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">Flags</a> { <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf">CuADeleteOnExit</a> = 0x02
, <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da43e4e9850e6cd941c067e571847136c2">CuAUserFlags</a> = 0x0100
, <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da0139759378eabd86d914827123218a48">MaxUserFlags</a> = 0x10000
 }</td></tr>
<tr class="separator:a23c71d30d18fdf76bf7b3b0ce148013d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1ec3c656fa9d8b8b320741b2182514" id="r_a8d1ec3c656fa9d8b8b320741b2182514"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d1ec3c656fa9d8b8b320741b2182514">ActivityType</a> { <a class="el" href="#a8d1ec3c656fa9d8b8b320741b2182514a1ed3447a797c34f77b7e492a0d633746">PeriodicAType</a>
, <a class="el" href="#a8d1ec3c656fa9d8b8b320741b2182514a84877b793515c9ba66173cd32b66ef3f">UserAType</a> = 100
 }</td></tr>
<tr class="separator:a8d1ec3c656fa9d8b8b320741b2182514"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5b52df27a5e3d1f5b7e69f8be7e7c993" id="r_a5b52df27a5e3d1f5b7e69f8be7e7c993"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b52df27a5e3d1f5b7e69f8be7e7c993">CuActivity</a> (const <a class="el" href="classCuData.html">CuData</a> &amp;token)</td></tr>
<tr class="separator:a5b52df27a5e3d1f5b7e69f8be7e7c993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae52b923d7392ea84f1b6badc50db4da6" id="r_ae52b923d7392ea84f1b6badc50db4da6"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae52b923d7392ea84f1b6badc50db4da6">~CuActivity</a> ()</td></tr>
<tr class="separator:ae52b923d7392ea84f1b6badc50db4da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49894b33940fbacb8ee11f7ed12fa398" id="r_a49894b33940fbacb8ee11f7ed12fa398"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49894b33940fbacb8ee11f7ed12fa398">setThread</a> (<a class="el" href="classCuThreadInterface.html">CuThreadInterface</a> *<a class="el" href="#a3c9fefefb0e89da29ba77613e2f6b6d6">thread</a>)</td></tr>
<tr class="separator:a49894b33940fbacb8ee11f7ed12fa398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af08f20f517fb9358badc9f38c447401f" id="r_af08f20f517fb9358badc9f38c447401f"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af08f20f517fb9358badc9f38c447401f">getType</a> () const =0</td></tr>
<tr class="separator:af08f20f517fb9358badc9f38c447401f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d70e5d308d22c16cc4eabae25c7feb7" id="r_a7d70e5d308d22c16cc4eabae25c7feb7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d70e5d308d22c16cc4eabae25c7feb7">event</a> (<a class="el" href="classCuActivityEvent.html">CuActivityEvent</a> *e)=0</td></tr>
<tr class="memdesc:a7d70e5d308d22c16cc4eabae25c7feb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive events from the main thread in the <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> thread of execution.  <br /></td></tr>
<tr class="separator:a7d70e5d308d22c16cc4eabae25c7feb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3147502a8740cc3961f4d079b1d508" id="r_a5c3147502a8740cc3961f4d079b1d508"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c3147502a8740cc3961f4d079b1d508">getFlags</a> () const</td></tr>
<tr class="memdesc:a5c3147502a8740cc3961f4d079b1d508"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the activity flags  <br /></td></tr>
<tr class="separator:a5c3147502a8740cc3961f4d079b1d508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628784b290540313025578994ecbe8a9" id="r_a628784b290540313025578994ecbe8a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a628784b290540313025578994ecbe8a9">setFlags</a> (int f)</td></tr>
<tr class="memdesc:a628784b290540313025578994ecbe8a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the flags on the activity  <br /></td></tr>
<tr class="separator:a628784b290540313025578994ecbe8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd96d5ed45042a3fa82e3f83a7a1e307" id="r_afd96d5ed45042a3fa82e3f83a7a1e307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd96d5ed45042a3fa82e3f83a7a1e307">setFlag</a> (<a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">Flags</a> f, bool on)</td></tr>
<tr class="memdesc:afd96d5ed45042a3fa82e3f83a7a1e307"><td class="mdescLeft">&#160;</td><td class="mdescRight">set a specific <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> flag true or false  <br /></td></tr>
<tr class="separator:afd96d5ed45042a3fa82e3f83a7a1e307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cf68bd6c041c41355ca8a4ee8c86f9" id="r_a02cf68bd6c041c41355ca8a4ee8c86f9"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02cf68bd6c041c41355ca8a4ee8c86f9">matches</a> (const <a class="el" href="classCuData.html">CuData</a> &amp;token) const =0</td></tr>
<tr class="separator:a02cf68bd6c041c41355ca8a4ee8c86f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9108d99d0eaebb2251230656ee68bee2" id="r_a9108d99d0eaebb2251230656ee68bee2"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9108d99d0eaebb2251230656ee68bee2">repeat</a> () const =0</td></tr>
<tr class="memdesc:a9108d99d0eaebb2251230656ee68bee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">must return the interval of time, in milliseconds, before the next <a class="el" href="#a3823ea2e31f89c377760859f399c26f0">CuActivity::execute</a> call, or zero or negative in order to not execute again  <br /></td></tr>
<tr class="separator:a9108d99d0eaebb2251230656ee68bee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeccbb8c64988497bed4f292a28f1b20e" id="r_aeccbb8c64988497bed4f292a28f1b20e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeccbb8c64988497bed4f292a28f1b20e">publishResult</a> (const <a class="el" href="classCuData.html">CuData</a> &amp;data)</td></tr>
<tr class="memdesc:aeccbb8c64988497bed4f292a28f1b20e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a result from the activity thread (whence the method is called) to the main thread.  <br /></td></tr>
<tr class="separator:aeccbb8c64988497bed4f292a28f1b20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad556ecea30a5ff82e364f4d1a824b069" id="r_ad556ecea30a5ff82e364f4d1a824b069"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad556ecea30a5ff82e364f4d1a824b069">publishProgress</a> (int step, int total, const <a class="el" href="classCuData.html">CuData</a> &amp;data)</td></tr>
<tr class="memdesc:ad556ecea30a5ff82e364f4d1a824b069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a progress from the activity thread (whence the method is called) to the main thread.  <br /></td></tr>
<tr class="separator:ad556ecea30a5ff82e364f4d1a824b069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91e79aba1435984b93abf9ec76fd130" id="r_ad91e79aba1435984b93abf9ec76fd130"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad91e79aba1435984b93abf9ec76fd130">publishResult</a> (const std::vector&lt; <a class="el" href="classCuData.html">CuData</a> &gt; &amp;datalist)</td></tr>
<tr class="memdesc:ad91e79aba1435984b93abf9ec76fd130"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a result from the activity to the main thread. Datalist version.  <br /></td></tr>
<tr class="separator:ad91e79aba1435984b93abf9ec76fd130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36a5d8c948fc112ede41820553d428a" id="r_ab36a5d8c948fc112ede41820553d428a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab36a5d8c948fc112ede41820553d428a">publishResult</a> (const <a class="el" href="classCuUserData.html">CuUserData</a> *data)</td></tr>
<tr class="separator:ab36a5d8c948fc112ede41820553d428a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b52d2b06eafe101fed01a91ce1c792" id="r_a07b52d2b06eafe101fed01a91ce1c792"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classCuData.html">CuData</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07b52d2b06eafe101fed01a91ce1c792">getToken</a> () const</td></tr>
<tr class="memdesc:a07b52d2b06eafe101fed01a91ce1c792"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the activity token  <br /></td></tr>
<tr class="separator:a07b52d2b06eafe101fed01a91ce1c792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36203870556f6f6f5c4fa058a8c9fb7" id="r_af36203870556f6f6f5c4fa058a8c9fb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af36203870556f6f6f5c4fa058a8c9fb7">setThreadToken</a> (const std::string &amp;tt)</td></tr>
<tr class="separator:af36203870556f6f6f5c4fa058a8c9fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86d4e68e0efb02d0eb2e2e5ab2f6c2d" id="r_ab86d4e68e0efb02d0eb2e2e5ab2f6c2d"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab86d4e68e0efb02d0eb2e2e5ab2f6c2d">threadToken</a> () const</td></tr>
<tr class="separator:ab86d4e68e0efb02d0eb2e2e5ab2f6c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290c5d3a58b3bf691e397074befcfc22" id="r_a290c5d3a58b3bf691e397074befcfc22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a290c5d3a58b3bf691e397074befcfc22">doInit</a> ()</td></tr>
<tr class="separator:a290c5d3a58b3bf691e397074befcfc22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab69c2d78d1a03e3bf9ae01565daed7" id="r_a3ab69c2d78d1a03e3bf9ae01565daed7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ab69c2d78d1a03e3bf9ae01565daed7">doExecute</a> ()</td></tr>
<tr class="separator:a3ab69c2d78d1a03e3bf9ae01565daed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6151845046f88ef2a4fa9675444cf23e" id="r_a6151845046f88ef2a4fa9675444cf23e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6151845046f88ef2a4fa9675444cf23e">doOnExit</a> ()</td></tr>
<tr class="separator:a6151845046f88ef2a4fa9675444cf23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac97d4e1a3ac1dfab8cad8c084e2b1d45" id="r_ac97d4e1a3ac1dfab8cad8c084e2b1d45"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac97d4e1a3ac1dfab8cad8c084e2b1d45">init</a> ()=0</td></tr>
<tr class="separator:ac97d4e1a3ac1dfab8cad8c084e2b1d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3823ea2e31f89c377760859f399c26f0" id="r_a3823ea2e31f89c377760859f399c26f0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3823ea2e31f89c377760859f399c26f0">execute</a> ()=0</td></tr>
<tr class="separator:a3823ea2e31f89c377760859f399c26f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216e7d355686b81f467014089233f664" id="r_a216e7d355686b81f467014089233f664"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a216e7d355686b81f467014089233f664">onExit</a> ()=0</td></tr>
<tr class="separator:a216e7d355686b81f467014089233f664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9fefefb0e89da29ba77613e2f6b6d6" id="r_a3c9fefefb0e89da29ba77613e2f6b6d6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classCuThreadInterface.html">CuThreadInterface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c9fefefb0e89da29ba77613e2f6b6d6">thread</a> () const</td></tr>
<tr class="separator:a3c9fefefb0e89da29ba77613e2f6b6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>a class with hook functions where work can be done in a separate thread and wherefrom results are <em>published</em> to the main thread. </p>
<h1><a class="anchor" id="hook_fun"></a>
hook functions</h1>
<p>Three pure virtual methods are defined by <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> abstract class. The code that subclasses implement within those methods are executed in a background thread. When the task is over, the results can be safely delivered to the main thread through the publishResult function. The progress of the ongoing work can also be notified to the main thread with publishProgress.</p>
<ul>
<li>init </li>
<li>execute </li>
<li>onExit</li>
</ul>
<h2><a class="anchor" id="init_hk"></a>
The init hook</h2>
<p>Here subclasses will place initialisation code, for example a <em>tcp</em> connection can be set up The state of the connection or connection errors can be notified on the main thread calling publishResult.</p>
<h2><a class="anchor" id="ex_hk"></a>
The execute hook</h2>
<p>Subclasses will put the main part of the work here. If in the <a class="el" href="#ac97d4e1a3ac1dfab8cad8c084e2b1d45">CuActivity::init</a> hook a <em>tcp connection</em> has been successfully established, in the <em>execute</em> hook data can be downloaded from the remote host. The progress of the download can be notified through the publishProgress method. The cuurent step, the total steps and data can be delivered from the background thread to the main thread, where a progress bar on a graphical user interface shows the percentage of the download progress. Activities intended to be executed once are called <em>isolated activities</em> (see below).</p>
<p>The <em>execute</em> method can also be called periodically. For instance, a temperature can be read at regular intervals from a device through the network (see continuous activities, such as <a class="el" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti...">CuPeriodicActivity</a>). In this case, subclasses will return a timeout in milliseconds from the <a class="el" href="#a9108d99d0eaebb2251230656ee68bee2" title="must return the interval of time, in milliseconds, before the next CuActivity::execute call,...">CuActivity::repeat</a> function.</p>
<h2><a class="anchor" id="exit_hk"></a>
The onExit hook</h2>
<p>After <em>init</em> and <em>execute</em> finish, the onExit hook is invoked. The code inside onExit, as well as in the two other mentioned hooks, is run in a separate thread. There you would clean up the resources allocated in <em>init</em> and exploited in the <em>execute</em> method. In our example, the <em>tcp connection</em> may be closed. See the <a class="el" href="#cont_act">Periodic activities</a> section for further details about onExit invocation in <em>continuous activities</em>.</p>
<dl class="section note"><dt>Note</dt><dd>Calling publishResult from within onExit requires special attention. You must be sure that listeners have not been destroyed by that time.</dd></dl>
<h2><a class="anchor" id="execution_thred"></a>
Thread of execution</h2>
<p>When <a class="el" href="classCumbia.html#a0455579f28d94387e97e0f678f4dbe01" title="registers (adds) an activity to cumbia, links it to a data listener, assigns its execution to an exis...">Cumbia::registerActivity</a> is called to run a new activity, a so called <em>thread token</em> is passed as input argument to the method. The <em>thread token</em> is compared to all other <em>threads running in the same cumbia</em> application using CuThread::isEquivalent. If an <em>equivalent</em> thread is found, it is reused for the new activity. A new thread is started otherwise.</p>
<h2><a class="anchor" id="post_data"></a>
Post data from the background thread to the main</h2>
<p>The means to deliver results from the background thread where init is executed and the main thread is the <a class="el" href="classCuData.html" title="container for data exchange for the cumbia library and its clients">CuData</a> class, that is a <em>key/value</em> bundle. These are the three methods executed in background. They must be implemented in subclasses.</p>
<h1><a class="anchor" id="isol_act"></a>
Isolated activities</h1>
<p>Isolated activities are designed to be executed once. This means <em>execute is called only once</em> after <em>init</em>. <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> can be set in order to customise the behavior of the activity. In particular, an activity </p><ul>
<li>can be automatically unregistered after <a class="el" href="#a216e7d355686b81f467014089233f664">CuActivity::onExit</a> (CuActivity::CuAUnregisterAfterExec flag) </li>
<li>can be automatically deleted when no longer necessary (<a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf">CuActivity::CuADeleteOnExit</a>)</li>
</ul>
<p>CuIsolatedActivity by default enables <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf">CuActivity::CuADeleteOnExit</a> and CuActivity::CuAUnregisterAfterExec</p>
<p>If the flag CuAUnregisterAfterExec is set to false, then the activity remains <em>alive</em> after the end of execute and it is possible to exploit this to let the activity wait for further events that wake it up and trigger another execution. For example, the CuEventActivity in the <em>cumbia-tango</em> module and the CuMonitorActivity in the <em>cumbia-epics</em> module set this flag to <em>false</em> in order to wait for <em>events</em> from the Tango or Epics <em>control system</em> engines, respectively.</p>
<h1><a class="anchor" id="cont_act"></a>
Periodic activities</h1>
<p>In a <em>continuous activity</em> the <em>execute</em> method is called periodically by a timer. To exit the timer, the activity is normally unregistered through <a class="el" href="classCumbia.html#ae72c237833f06276a2ba62f5598197f5" title="unregister an activity from cumbia">Cumbia::unregisterActivity</a>. An exit event interrupts the timer and onExit is invoked at last.</p>
<p><a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> can be set in order to customise the behavior of the activity. <a class="el" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti...">CuPeriodicActivity</a> by default enables <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf">CuActivity::CuADeleteOnExit</a> and CuActivity::CuAUnregisterAfterExec See the section <a class="el" href="#isol_act">Isolated activities</a> above for further information about the <em>activity flags</em>.</p>
<p>The period of a <em>continuous activity</em> can either be set before execution or at run time by <a class="el" href="classCuPeriodicActivity.html#a5ef0b9eb4909a219566e9d8114dd008e" title="sets the time, in milliseconds, between two subsequent calls of the execute method">CuPeriodicActivity::setInterval</a>. The CuPeriodicActivity::getTimeout returns the value of the period. Special events can be sent from the main thread to the background thread in order to temporarily change the state of a <a class="el" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti...">CuPeriodicActivity</a>. A <em>continuous activity</em> </p><ul>
<li>can be paused </li>
<li>resumed </li>
<li>explicitly *execute*d </li>
<li>allows to change its period. See <a class="el" href="classCuPeriodicActivity.html#a0223b33729b9358ea0868b1c50a4b31d" title="received in the CuActivity thread from the main thread, it can change the execution timeout,...">CuPeriodicActivity::event</a> documentation for further details.</li>
</ul>
<h1><a class="anchor" id="act_implementations"></a>
Examples</h1>
<h2><a class="anchor" id="cumbia_tango_module"></a>
Implementations in the cumbia-tango module</h2>
<h3><a class="anchor" id="cupollact"></a>
CuPollingActivity</h3>
<p>The <em>cumbia-tango</em> module implements <a class="el" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti...">CuPeriodicActivity</a> in its CuPollingActivity class, that periodically reads Tango attributes or commands.</p>
<h3><a class="anchor" id="cuevact"></a>
CuEventActivity</h3>
<p>The <em>cumbia-tango</em> module implements <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> in CuEventActivity. CuEventActivity's repeat method returns 0, so that execute is called only once. CuEventActivity could have been derived from CuIsolatedActivity as well.</p>
<h3><a class="anchor" id="cutdbpropact"></a>
CuGetTDbPropActivity</h3>
<p>CuGetTDbPropActivity from the <em>cumbia-tango</em> module inherits from CuIsolatedActivity so that its <em>execute</em> method is run only once. In fact, CuGetTDbPropActivity connects to the dtabase and reads from it only one time in the <em>execute</em> method.</p>
<h3><a class="anchor" id="observ"></a>
Observations</h3>
<p>As you can see, <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> and its <em>isolated</em> and <em>continuous</em> flavours offer enough flexibility to the clients: CuEventActivity directly derives from <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> and determines its <em>one shot</em> nature through the <em>repeat</em> method. It could have subclassed CuIsolatedActivity as well. CuPollingActivity benefits from the <em>periodic</em> nature of <a class="el" href="classCuPeriodicActivity.html" title="an implementation of CuActivity that calls CuActivity::execute repeatedly at a certain interval of ti...">CuPeriodicActivity</a>. Finally, CuGetTDbPropActivity is an example where only the <em>execute</em> method is really doing work. CuGetTDbPropActivity's <em>init</em> and <em>onExit</em> have empty bodies. See the cumbia-tango module for further reading.</p>
<h3><a class="anchor" id="cua_evloop"></a>
Suspend the background execution of an activity: wait for events and execute callbacks</h3>
<p>If the flag CuActivity::CuAUnregisterAfterExec is set to false, the execution of the activity is <em>suspended</em> after <em>execute</em> finishes, as in an <em>event loop</em>. The activity waits for the next event to wake it up and do some job. CuEventActivity from the cumbia-tango module and CuMonitorActivity from the cumbia-epics module benefit from this feature to listen for upcoming <em>events</em>. When an event arrives, the respective callbacks are invoked, the data is extracted from the event and the result is published on the main thread. If CuActivity::CuAUnregisterAfterExec is set to false, <a class="el" href="classCumbia.html#ae72c237833f06276a2ba62f5598197f5" title="unregister an activity from cumbia">Cumbia::unregisterActivity</a> may be needed to exit this activity "*loop*".</p>
<h3><a class="anchor" id="write_simple_act"></a>
Write a simple activity</h3>
<ul>
<li>md_src_tutorial_cuactivity </li>
</ul>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a8d1ec3c656fa9d8b8b320741b2182514" name="a8d1ec3c656fa9d8b8b320741b2182514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d1ec3c656fa9d8b8b320741b2182514">&#9670;&#160;</a></span>ActivityType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a8d1ec3c656fa9d8b8b320741b2182514">CuActivity::ActivityType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8d1ec3c656fa9d8b8b320741b2182514a1ed3447a797c34f77b7e492a0d633746" name="a8d1ec3c656fa9d8b8b320741b2182514a1ed3447a797c34f77b7e492a0d633746"></a>PeriodicAType&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8d1ec3c656fa9d8b8b320741b2182514a84877b793515c9ba66173cd32b66ef3f" name="a8d1ec3c656fa9d8b8b320741b2182514a84877b793515c9ba66173cd32b66ef3f"></a>UserAType&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="a23c71d30d18fdf76bf7b3b0ce148013d" name="a23c71d30d18fdf76bf7b3b0ce148013d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c71d30d18fdf76bf7b3b0ce148013d">&#9670;&#160;</a></span>Flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf" name="a23c71d30d18fdf76bf7b3b0ce148013da8a338bec3440e4704d70e4aad970b0cf"></a>CuADeleteOnExit&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a23c71d30d18fdf76bf7b3b0ce148013da43e4e9850e6cd941c067e571847136c2" name="a23c71d30d18fdf76bf7b3b0ce148013da43e4e9850e6cd941c067e571847136c2"></a>CuAUserFlags&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a23c71d30d18fdf76bf7b3b0ce148013da0139759378eabd86d914827123218a48" name="a23c71d30d18fdf76bf7b3b0ce148013da0139759378eabd86d914827123218a48"></a>MaxUserFlags&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5b52df27a5e3d1f5b7e69f8be7e7c993" name="a5b52df27a5e3d1f5b7e69f8be7e7c993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b52df27a5e3d1f5b7e69f8be7e7c993">&#9670;&#160;</a></span>CuActivity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CuActivity::CuActivity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCuData.html">CuData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae52b923d7392ea84f1b6badc50db4da6" name="ae52b923d7392ea84f1b6badc50db4da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae52b923d7392ea84f1b6badc50db4da6">&#9670;&#160;</a></span>~CuActivity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CuActivity::~CuActivity </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3ab69c2d78d1a03e3bf9ae01565daed7" name="a3ab69c2d78d1a03e3bf9ae01565daed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab69c2d78d1a03e3bf9ae01565daed7">&#9670;&#160;</a></span>doExecute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::doExecute </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="#a3823ea2e31f89c377760859f399c26f0">execute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classCuThread.html#a04430b04bde54f9575ad5f6e56172a23">CuThread::run()</a>.</p>

</div>
</div>
<a id="a290c5d3a58b3bf691e397074befcfc22" name="a290c5d3a58b3bf691e397074befcfc22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290c5d3a58b3bf691e397074befcfc22">&#9670;&#160;</a></span>doInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::doInit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="#ac97d4e1a3ac1dfab8cad8c084e2b1d45">init()</a>.</p>

</div>
</div>
<a id="a6151845046f88ef2a4fa9675444cf23e" name="a6151845046f88ef2a4fa9675444cf23e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6151845046f88ef2a4fa9675444cf23e">&#9670;&#160;</a></span>doOnExit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::doOnExit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="#a216e7d355686b81f467014089233f664">onExit()</a>.</p>

</div>
</div>
<a id="a7d70e5d308d22c16cc4eabae25c7feb7" name="a7d70e5d308d22c16cc4eabae25c7feb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d70e5d308d22c16cc4eabae25c7feb7">&#9670;&#160;</a></span>event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CuActivity::event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCuActivityEvent.html">CuActivityEvent</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive events from the main thread in the <a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> thread of execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>the event. Activity reimplementations can extend <a class="el" href="classCuActivityEvent.html" title="Generic event to pass data to an activity.">CuActivityEvent</a> to provide custom events Do not delete e after use. <a class="el" href="classCumbia.html" title="primary cumbia class where activities are registered and unregistered. Provides access to the cumbia ...">Cumbia</a> will delete it after this method invocation. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classCuPeriodicActivity.html#a0223b33729b9358ea0868b1c50a4b31d">CuPeriodicActivity</a>.</p>

<p class="reference">Referenced by <a class="el" href="classCuThread.html#a04430b04bde54f9575ad5f6e56172a23">CuThread::run()</a>.</p>

</div>
</div>
<a id="a3823ea2e31f89c377760859f399c26f0" name="a3823ea2e31f89c377760859f399c26f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3823ea2e31f89c377760859f399c26f0">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CuActivity::execute </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#a3ab69c2d78d1a03e3bf9ae01565daed7">doExecute()</a>, and <a class="el" href="classCuPeriodicActivity.html#a0223b33729b9358ea0868b1c50a4b31d">CuPeriodicActivity::event()</a>.</p>

</div>
</div>
<a id="a5c3147502a8740cc3961f4d079b1d508" name="a5c3147502a8740cc3961f4d079b1d508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c3147502a8740cc3961f4d079b1d508">&#9670;&#160;</a></span>getFlags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CuActivity::getFlags </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns the activity flags </p>
<dl class="section return"><dt>Returns</dt><dd>the activity flags, a combination of values from <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a628784b290540313025578994ecbe8a9" title="set the flags on the activity">setFlags</a> </dd></dl>

</div>
</div>
<a id="a07b52d2b06eafe101fed01a91ce1c792" name="a07b52d2b06eafe101fed01a91ce1c792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b52d2b06eafe101fed01a91ce1c792">&#9670;&#160;</a></span>getToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCuData.html">CuData</a> &amp; CuActivity::getToken </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the activity token </p>
<p>The activity token can be used to identify or characterize an activity through a <a class="el" href="classCuData.html" title="container for data exchange for the cumbia library and its clients">CuData</a> bundle. This <em>must not be confused with the thread token</em>, which is used to decide whether a new activity is started in a new thread or an existing thread with the same token is used.</p>
<p>For that usage, see </p><ul>
<li><a class="el" href="classCuThread.html#a41ac388b4bc0e702f2b475a1d28add5b" title="returns true if this thread token is equal to other_thread_token">CuThread::matches</a> </li>
<li>md_src_tutorial_cuactivity </li>
<li><a class="el" href="classCuActivity.html" title="a class with hook functions where work can be done in a separate thread and wherefrom results are pub...">CuActivity</a> introductive documentation</li>
</ul>
<p>Activity token is const and set once in the class constructor, though this method is lock free and safe to access from different threads </p>

</div>
</div>
<a id="af08f20f517fb9358badc9f38c447401f" name="af08f20f517fb9358badc9f38c447401f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af08f20f517fb9358badc9f38c447401f">&#9670;&#160;</a></span>getType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int CuActivity::getType </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classCuPeriodicActivity.html#a8252b3d7deabf7b722ee9d1b46752f14">CuPeriodicActivity</a>.</p>

</div>
</div>
<a id="ac97d4e1a3ac1dfab8cad8c084e2b1d45" name="ac97d4e1a3ac1dfab8cad8c084e2b1d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97d4e1a3ac1dfab8cad8c084e2b1d45">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CuActivity::init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#a290c5d3a58b3bf691e397074befcfc22">doInit()</a>.</p>

</div>
</div>
<a id="a02cf68bd6c041c41355ca8a4ee8c86f9" name="a02cf68bd6c041c41355ca8a4ee8c86f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02cf68bd6c041c41355ca8a4ee8c86f9">&#9670;&#160;</a></span>matches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool CuActivity::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCuData.html">CuData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>token</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a216e7d355686b81f467014089233f664" name="a216e7d355686b81f467014089233f664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216e7d355686b81f467014089233f664">&#9670;&#160;</a></span>onExit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CuActivity::onExit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#a6151845046f88ef2a4fa9675444cf23e">doOnExit()</a>.</p>

</div>
</div>
<a id="ad556ecea30a5ff82e364f4d1a824b069" name="ad556ecea30a5ff82e364f4d1a824b069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad556ecea30a5ff82e364f4d1a824b069">&#9670;&#160;</a></span>publishProgress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::publishProgress </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>step</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>total</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCuData.html">CuData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a progress from the activity thread (whence the method is called) to the main thread. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#aeccbb8c64988497bed4f292a28f1b20e" title="Publish a result from the activity thread (whence the method is called) to the main thread.">publishResult</a> </dd></dl>

<p class="reference">References <a class="el" href="classCuThreadInterface.html#a23db4800456733404bcf27255a8e435c">CuThreadInterface::publishProgress()</a>.</p>

</div>
</div>
<a id="aeccbb8c64988497bed4f292a28f1b20e" name="aeccbb8c64988497bed4f292a28f1b20e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeccbb8c64988497bed4f292a28f1b20e">&#9670;&#160;</a></span>publishResult() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::publishResult </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCuData.html">CuData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a result from the activity thread (whence the method is called) to the main thread. </p>
<dl class="section note"><dt>Note</dt><dd>this method may be called even from a thread different from activity's execute. In fact, data is delivered through the event bridge / event loop. An example is cumbia-tango CuEventActivity, where publishResult is invoked from the Tango push_event callback's thread, different from the activity's. </dd></dl>

<p class="reference">References <a class="el" href="classCuThreadInterface.html#aadbb7855f5572d516a373640d0751940">CuThreadInterface::publishResult()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classCuPeriodicActivity.html#a0223b33729b9358ea0868b1c50a4b31d">CuPeriodicActivity::event()</a>.</p>

</div>
</div>
<a id="ab36a5d8c948fc112ede41820553d428a" name="ab36a5d8c948fc112ede41820553d428a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab36a5d8c948fc112ede41820553d428a">&#9670;&#160;</a></span>publishResult() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::publishResult </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCuUserData.html">CuUserData</a> *</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="classCuThreadInterface.html#aadbb7855f5572d516a373640d0751940">CuThreadInterface::publishResult()</a>.</p>

</div>
</div>
<a id="ad91e79aba1435984b93abf9ec76fd130" name="ad91e79aba1435984b93abf9ec76fd130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91e79aba1435984b93abf9ec76fd130">&#9670;&#160;</a></span>publishResult() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::publishResult </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classCuData.html">CuData</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>datalist</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a result from the activity to the main thread. Datalist version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">datalist</td><td>a const reference vector of <a class="el" href="classCuData.html" title="container for data exchange for the cumbia library and its clients">CuData</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>see note in publishResult above </dd></dl>

<p class="reference">References <a class="el" href="classCuThreadInterface.html#aadbb7855f5572d516a373640d0751940">CuThreadInterface::publishResult()</a>.</p>

</div>
</div>
<a id="a9108d99d0eaebb2251230656ee68bee2" name="a9108d99d0eaebb2251230656ee68bee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9108d99d0eaebb2251230656ee68bee2">&#9670;&#160;</a></span>repeat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int CuActivity::repeat </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>must return the interval of time, in milliseconds, before the next <a class="el" href="#a3823ea2e31f89c377760859f399c26f0">CuActivity::execute</a> call, or zero or negative in order to not execute again </p>
<dl class="section return"><dt>Returns</dt><dd>an integer greater than zero representing the interval, in milliseconds, before next execution or zero (or negative) to prevent <a class="el" href="#a3823ea2e31f89c377760859f399c26f0">CuActivity::execute</a> to be called again </dd></dl>

<p>Implemented in <a class="el" href="classCuPeriodicActivity.html#ac80885aa710a873c7add2fa7c7fd8ac2">CuPeriodicActivity</a>.</p>

<p class="reference">Referenced by <a class="el" href="classCuThread.html#a04430b04bde54f9575ad5f6e56172a23">CuThread::run()</a>.</p>

</div>
</div>
<a id="afd96d5ed45042a3fa82e3f83a7a1e307" name="afd96d5ed45042a3fa82e3f83a7a1e307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd96d5ed45042a3fa82e3f83a7a1e307">&#9670;&#160;</a></span>setFlag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::setFlag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a></td>          <td class="paramname"><span class="paramname"><em>f</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>on</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set a specific <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> flag true or false </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>a flag from <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> </td></tr>
    <tr><td class="paramname">on</td><td>true or false to enable/disable a flag </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a628784b290540313025578994ecbe8a9" name="a628784b290540313025578994ecbe8a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628784b290540313025578994ecbe8a9">&#9670;&#160;</a></span>setFlags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::setFlags </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>f</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the flags on the activity </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>a combination of <a class="el" href="#a23c71d30d18fdf76bf7b3b0ce148013d">CuActivity::Flags</a> <b>or</b>ed together. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="classCuPeriodicActivity.html#a10220bfa8942fbb77cd4311fa7a1a47e">CuPeriodicActivity::CuPeriodicActivity()</a>.</p>

</div>
</div>
<a id="a49894b33940fbacb8ee11f7ed12fa398" name="a49894b33940fbacb8ee11f7ed12fa398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49894b33940fbacb8ee11f7ed12fa398">&#9670;&#160;</a></span>setThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::setThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCuThreadInterface.html">CuThreadInterface</a> *</td>          <td class="paramname"><span class="paramname"><em>thread</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="#a3c9fefefb0e89da29ba77613e2f6b6d6">thread()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classCumbia.html#a0455579f28d94387e97e0f678f4dbe01">Cumbia::registerActivity()</a>.</p>

</div>
</div>
<a id="af36203870556f6f6f5c4fa058a8c9fb7" name="af36203870556f6f6f5c4fa058a8c9fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36203870556f6f6f5c4fa058a8c9fb7">&#9670;&#160;</a></span>setThreadToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CuActivity::setThreadToken </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>tt</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="classCuThread.html#a2295b70cf47ffa5d58c37da2c6304156">CuThread::registerActivity()</a>.</p>

</div>
</div>
<a id="a3c9fefefb0e89da29ba77613e2f6b6d6" name="a3c9fefefb0e89da29ba77613e2f6b6d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c9fefefb0e89da29ba77613e2f6b6d6">&#9670;&#160;</a></span>thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCuThreadInterface.html">CuThreadInterface</a> * CuActivity::thread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#a49894b33940fbacb8ee11f7ed12fa398">setThread()</a>.</p>

</div>
</div>
<a id="ab86d4e68e0efb02d0eb2e2e5ab2f6c2d" name="ab86d4e68e0efb02d0eb2e2e5ab2f6c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86d4e68e0efb02d0eb2e2e5ab2f6c2d">&#9670;&#160;</a></span>threadToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; CuActivity::threadToken </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cuactivity_8h_source.html">cuactivity.h</a></li>
<li><a class="el" href="cuactivity_8cpp.html">cuactivity.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCuActivity.html">CuActivity</a></li>
    <li class="footer">Generated on Fri Aug 16 2024 14:34:38 for cumbia by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
